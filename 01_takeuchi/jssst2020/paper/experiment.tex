\section{実験}
本ソルバーの性能評価のために，前節で述べた基本符号化と改良符号化を用いて実験を行った．
インスタンスには，表\ref{tab:instance}に示す企業から提供されたCAFE問題のインスタンス
3問を用いた．特に，インスタンスmediumは現実的な問題のサイズとなっている．
ただし，この実験で用いたインスタンスには排除制約は含まれていない．
各インスタンスでCAFE基準値8.5, 9.0, 9.5, 10.0, 10.5km/Lの5通りに対して，
3種類の装備仕様による解を求めた．

ASPシステムには，広く普及している高速ASPソルバー\textit{clingo}-5.4.0を使用し，
タイムアウトは7,200秒(2時間)とした．実験環境は，Mac mini(3.2GHz, 64GBメモリ)である．

表\ref{tab:result}に，各インスタンスとCAFE基準値に対して，基本符号化と改良符号化で
得られた装備仕様の予想販売台数を示す．* 付きの値は最適解であることを示し，太字の値は2つの
符号化の間で販売台数が最良値であることを意味する．また，UNSATは制約を充足する解が一つも
存在しないことを意味し，UNKNOWNは制限時間内に解を見つけることができなかったことを意味する．


小規模なインスタンスsmallについては，基本符号化，改良符号化ともに5問すべてに対して最適解，
あるいはUNSATを得ることに成功した．
最良値を得た問題数は，基本符号化が6問，改良符号化が13問で，改良符号化の方が多くの問題に
対して優れた解を得たことがわかる．特に，大規模なインスタンスbigについては，改良符号化が
5問すべてに対して基本符号化よりも優れた解を得ており，
改良符号化が規模の大きい問題に対して有効であることがわかった．


\begin{table}[tb]
 \caption{CAFE問題のインスタンス}
 \centering
 \begin{tabular}{crrrr} \bhline
  インスタンス & VP	& V	& require & exclude	\\\hline
  small	    & 8		& 21	& 4	  & 0	        \\
  medium    & 86	& 229	& 147	  & 0	        \\
  big	    & 315	& 1,337	& 0	  & 0        	\\\hline
 \end{tabular}
 \label{tab:instance}
\end{table}

\begin{table}[tb]
 \caption{実験結果}
 \centering
 \begin{tabular}{c|r|rr} \bhline
  インス & CAFE & \multicolumn{2}{c}{販売台数} \\ \cline{3-4}
  タンス & 基準値 & 基本符号化             & 改良符号化 \\\hline    
  small & 8.5   & \textbf{6,021*}       & \textbf{6,021*}       \\
        & 9.0   & \textbf{5,007*}       & \textbf{5,007*}       \\
        & 9.5   & \textbf{2,688*}       & \textbf{2,688*}       \\
        & 10.0  & \textbf{1,318*}       & \textbf{1,318*}       \\
        & 10.5  & UNSAT                 & UNSAT                 \\ \hline
  medium & 8.5  & 6,010                 & \textbf{6,021}        \\
         & 9.0  & \textbf{5,595}        & \textbf{5,595}        \\
         & 9.5  & \textbf{3,447}        & 3,430                 \\
         & 10.0 & 2,245                 & \textbf{2,250}        \\
         & 10.5 & 1,690                 & \textbf{1,845}        \\ \hline
  big   & 8.5   & UNKNOWN               & \textbf{3,877}        \\
        & 9.0   & 1,038                 & \textbf{4,623}        \\
        & 9.5   & 688                   & \textbf{3,121}        \\
        & 10.0  & 1,634                 & \textbf{2,064}        \\
        & 10.5  & 538                   & \textbf{904}          \\ \hline \hline
  \multicolumn{2}{c}{最良値の数} & 6 & 13                        \\ \hline
 \end{tabular}
 \label{tab:result}
\end{table}

次に，基本符号化と改良符号化で基礎化後のルール数を比較する．
CAFE基準値は9.0km/Lとし，表\ref{tab:instance}のインスタンス3種類を用いた．
ASPソルバー\textit{clingo}にオプション\code{--stats}を用いることで
表示される\code{Constraints}の値をルール数とみなしている．
得られたルール数を表\ref{tab:rule}に示す．
括弧内の数字は，基本符号化のルール数を1としたときの比率である．

表\ref{tab:rule}から，改良符号化の方がルール数が少ないことがわかる．
ASPではルール数が少ない方が解が求まりやすい傾向にあることが経験則的に知られており，
このルール数の差が改良符号化の性能の向上につながっていると考えられる．

\begin{table}[tb]
 \caption{基礎化後のルール数}
 \centering
 \begin{tabular}{crr} \bhline
  インスタンス & 基本符号化    & 改良符号化    \\ \hline
  small	    & 83,520(1.00)  & 32,855(0.39) \\ 
  medium    & 93,017(1.00)  & 56,940(0.61) \\
  big	    & 155,654(1.00) & 42,190(0.27) \\ \hline
 \end{tabular}
 \label{tab:rule}
\end{table}


最後に，改良符号化と，改良符号化にオプション数最小化を加えて問題を
拡張した符号化(拡張符号化)を用いて，最適解の列挙による解の個数の比較を行った．
インスタンスには第\ref{sec:background}節の図\ref{fig:ovm_example}を用いて，
CAFE基準値8.5, 9.0, 9.5km/Lの3通りに対して解を求めた．
ASPソルバー\textit{clingo}ではオプション\code{--opt-mode=optN}により解の列挙が可能であり，
実験結果を表\ref{tab:option}に示す．

CAFE基準値が8.5km/Lのとき，予想販売台数が5,525台である最適解が，
改良符号化では3つ存在したが，オプション数最小化を加えることで，
拡張符号化では1つに決められていることがわかる．
このように，CAFE問題ソルバーでは目的関数を追加することで，複数の最適解に優劣を
つけることができることがわかった．

\begin{table}[tb]
 \caption{最適解の個数の比較}
 \centering
  \begin{tabular}{r|r|c|c} \bhline
    \small{CAFE} & \small{販売台数} & \multicolumn{2}{c}{\small{最適解の個数}} \\ \cline{3-4}
    \small{基準値} &     & \small{改良符号化} & \small{拡張符号化}\\ \hline        
    8.5       & 5,525   & 3 & \textbf{1}\\ 
    9.0       & 3,904   & 2 & 2 \\
    9.5       & 1,699   & 1 & 1 \\ \hline
  \end{tabular}
 \label{tab:option}
\end{table}

