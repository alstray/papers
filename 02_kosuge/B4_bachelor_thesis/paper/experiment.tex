%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
\chapter{実行実験}\label{sec:exp}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 

導入した高速化手法が有効であるかを評価するために，\ref{sec:bg}章に示したクイーングラフ彩色問題を用いて実験をし，その結果について比較評価を行う．
実験は，SMTソルバーのz3(ver. 4.8.9)を用いてクイーングラフ彩色問題の大きさN=5〜13について，1問あたりの制限時間を2時間として実験し，各実行CPU時間を計測した．
実験環境は，Mac mini，3.2GHz，64GBメモリである．
実行実験の結果をまとめたものを表\ref{tb:result}と\ref{tb:result2}に表す．
表\ref{tb:result}は\ref{sec:pro_hint_1},\ref{sec:pro_hint_2}のヒント制約を加える手法と\ref{sec:pro_hint_3}のPB符号化を用いる手法の実験結果である．
上から1行目が問題の大きさ$N$と，その問題に解があるかを示している．
(satが解が存在していることを表し，unsatが解が存在しないことを表している)
左から1列目が用いたモデル化方法と高速化手法を示している．
COLとPOSはそれぞれ色変数モデルと位置変数モデルを用いることを表している．
H1とH2とH3はそれぞれ$distinct$制約に対するヒント制約1とヒント制約2とヒント制約1と2を合わせて使うことを表している．
PB1とPB2とPB3はそれぞれ$distinct$制約のPB符号化と\ref{sec:pro_hint_3}に示したPB符号化の改良手法1と改良手法2を用いることを表している．
表中の赤字は同じ大きさの問題の中で最も速く解けたことを示している．
(N=5,6についてはほとんど差が無かったため省略している)

\begin{table}[htb]
    \caption{実験結果1}
{\tiny \input{table/result}\label{tb:result}}
\end{table}

実験結果より，単に$distinct$制約のみを用いたものはSMTでは色変数モデルよりも位置変数モデルの方が性能が良いということがわかる．
また，N=11まで解けていることから加えた\ref{sec:pro_hint_1},\ref{sec:pro_hint_2}のヒント制約はSMTにおいても有効性が確認できた．

$distinct$制約をPB符号化して解く手法は,\ref{sec:pro_hint_3}の改良手法1は有効性を確認できたが，改良手法2は有効性は確認できなかった．
また，実行した際の出力からこの方法ではSMTソルバーはSATソルバーのみを使用していることがわかった．
このことからこの手法は背景理論ソルバーを扱えるという利点を活かせていないと言える．
また，符号化方法1がPB符号化した中で一番速く解けていることから，SMTソルバーにおいてPB符号化手法ではヒント制約を追加しないほうが良いと言える．
これは，今回扱った符号化方法ではヒント制約追加による性能向上よりも制約数増加による性能の低下の方が影響が大きいと考えられる．

表\ref{tb:result2}はチャネリング制約を用いたPB符号化の実験結果である．
Cはチャネリング制約を用いることを表す．
表中の青文字については間違った解を導き出したことを表している．
\begin{table}[htb]
    \caption{実験結果2}
{\tiny \input{table/result_channel}\label{tb:result2}}
\end{table}

\ref{sec:pro_pb_c}に示したチャネリング制約を用いた手法は，
COL+PB2+C, COL+PB3+Cでは単に$distinct$制約を用いた場合よりも性能が低下しており，
COL+PB1+Cでは，N=11において間違った解を出力している．このことからz3ソルバーにおいてチャネリング制約を用いることは不適であると言える．


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "paper"
%%% End:
