%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% alldiff 制約とその重要性

\textbf{alldifferent制約}は，制約プログラミングにおける代表的なグロー
バル制約の一つである．
$\Alldiff$は，整数変数 $x_1$, $x_2$, \ldots, $x_n$ の値が互いに異なる
ことを表す制約である．すなわち
\begin{align*}\small
  \Alldiff & \Llra \bigwedge_{1 \le i < j \le n} x_i \ne x_j
\end{align*}
である．
各 $x_i$ が 1 以上 $d$ 以下の値を取る場合，
alldifferent 制約の解は $d$ 個から $n$ 個を取り出す順列に対応する．
% \footnote{%
%   本稿では，簡単のためすべての変数 $x_i$ は 1 以上 $d$ 以下の値を取る
%   と仮定する．なお，このように仮定しても一般性を失わない．}
alldifferent 制約は，人工知能分野の諸問題に頻繁に現れる．
そのため，alldifferent 制約の効率的な実装は重要な研究課題であり，
これまでに数多くの研究がなされている~\cite{DBLP:reference/fai/HoeveK06}．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% alldiff 制約の SAT/PB 符号化

一方，2000年以降，
命題論理の充足可能性判定問題(Boolean SATisfiability; SAT)を解く
SAT ソルバーの性能が飛躍的に向上し，
alldifferent 制約を含む制約充足問題(制約プログラミングの言語)を
SAT に符号化して解く手法の研究が進められた．
順序符号化法 (Order Encoding; OE) は，
各整数変数$x$と各整数定数$a \in \Dom(x)$に対して，
$x\le a$を意味する命題変数$\oE{x}{a}$を用いる
\cite{DBLP:journals/constraints/TamuraTKB09}．
%
この順序符号化法に基づいたSAT型制約ソルバー{\sf Sugar}
\footnote{\texttt{https://cspsat.gitlab.io/sugar/}}
は，
2008年国際制約ソルバー競技会
のグローバル制約部門で第1位など，
alldifferent 制約に対して優れた性能を示している．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% alldiff 制約の SAT/PB 符号化



\vskip 5em



% 制約プログラミングの言語である制約充足問題\cite{JSAI:TamuraTB10}は，与えられた制約を満たす解
% を探索する問題である．
% 人工知能分野で生じる多くの組合せ問題は，制約充足問題として定式化
% できることが知られている．
% 制約充足問題では，グローバル制約を用いて，複数の変数に対する複雑な
% 制約を簡潔に表現できる点が特長の一つである．
% 代表的なグローバル制約$distinct(x_{1},x_{2},\ldots x_{n})$は，
% $x_{i}$が互いに異なる値をとることを表す．
% この$distinct$制約は，記述性の向上を目的として SMT ソルバー
% にも取り入れられている．
% しかしながら，制約充足問題に対する SMT ソルバーの求解性能は，
% SAT 型制約ソルバーと比べて劣っているとの報告もあり，
% $distinct$制約を含めその効率的な実装は重要な研究課題となっている．

% 本論文では，D.~E.~Knuth の教科書
% The Art of Computer Programming\cite{Knuth:TAOCP:SAT}
% でも取り上げられているクイーングラフ彩
% 色問題を題材とし，その SMT 符号化と$distinct$制約の高速化について述べる．
% クイーングラフ彩色問題の SMT 符号化として，
% クイーンの色を表す整数変数を用いた定式化(色変数モデル)，
% クイーンの位置を表す整数変数を用いた定式化(位置変数モデル)，
% 0-1変数を用いた定式化(0-1変数モデル)，
% チャネリング制約を用いて色変数モデルと0-1変数モデルをハイブリッドした
% 定式化(ハイブリッドモデル)を実装した．
% また，$distinct$制約の高速化として，
% 色変数モデルと位置変数モデルでは，
% SAT型制約ソルバーで有効性が示されている鳩の巣原理等に基づくヒント制約を追加した．
% 0-1変数モデルとハイブリッドモデルでは，
% $distinct$制約のPB符号化\cite{Ono19:ai}を応用し，探索空間の枝刈りを実装した．

% 実装した SMT 符号化と$distinct$制約の高速化手法の有効性を評価するために，
% クイーングラフ彩色問題($5\leq N\leq 13$)を用いた実行実験を行なった．
% その結果，色変数モデル+ヒント制約と位置変数モデル+ヒント制約が，$N=11$
% まで解を求め，最も良い性能を示した．
% これにより，$distinct$制約の高速化について，
% SATでのヒント制約が SMT においても有効であることが確認できた．
% その一方で，チャネリング制約を用いたハイブリッドモデルは，
% SMTソルバーの場合，求解性能が低下することが確認された．




% 本稿では， alldifferent 制約のSAT符号化について順序符号化と直接符号化をチャネリング制約を用いて融合させた手法について述べ，Knuth の The Art of Computer Programming \cite{Knuth:TAOCP:SAT}でも取り上げられているクイーングラフ彩色問題\cite{Tamura:queen}を用いて評価実験を行った結果について示す．





%%% Local Variables:
%%% mode: latex
%%% TeX-master: "paper"
%%% End:
