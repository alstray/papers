\section{はじめに}\label{chap:intro}

電力網の構成および制御は，エネルギーの節約や安定した電力供給を支える重
要な基盤技術である．
電力網は，高電圧で発電所と変電所を結ぶ送電網と，低電圧で変電
所と家庭や工場といった需要家を結ぶ\textbf{配電網}に大きく分類される．
配電網は変電所と需要家を結ぶ電力供給ネットワークであり，
その効率的な構成および制御はスマートグリッドや災害時の停電復旧などを
支える重要な研究課題である．

\textbf{配電網問題}
(Power Distribution Network Problem~\cite{Minato:dnet:ZDD,DBLP:journals/tsg/InoueTWKYKTMH14})
は，一般に，供給経路に関する\textbf{トポロジ制約}と，
電流・電圧に関する\textbf{電気制約}を満たす配電網の構成
(スイッチの開閉状態)を求める問題である．
トポロジ制約は，
供給経路上のループや複数の変電所と結ばれることによる短絡，
変電所と結ばれないことによる停電
が発生しないことを保証する．
電気制約は，供給経路の各区間で許容電流を超えないこと，
電気抵抗による電圧降下が許容範囲を超えないことを保証する．
%
\textbf{配電網遷移問題}は，配電網問題とその2つの実行可能解が与え
られたとき，一方の解から他方の解へ，遷移制約を満たしつつ実行可能解のみ
を経由して到達できるかどうかを判定し，到達可能であればその最短経路を求
める問題である．
この問題は，配電網の構成制御における災害時の停電復旧などへの応用を狙い
としている．

\textbf{解集合プログラミング}(Answer Set Programming; ASP\cite{%
  Baral03:cambridge,%
  Gelfond88:iclp,%
  Inoue08:jssst,%
  Niemela99:amai})は，
論理プログラミングから派生したプログラミングパラダイムである．
ASP言語は，一階論理に基づく知識表現言語の一種であり，
論理プログラムはASPのルールの有限集合である．
ASPシステムは論理プログラムから安定モデル意味論~\cite{Gelfond88:iclp}
に基づく解集合を計算するシステムである．
近年，SAT 技術を応用した高速な ASP システムが開発され，
制約充足問題，プランニング，システム生物学，時間割問題，システム検証な
ど様々な分野への実用的応用が急速に拡大している~\cite{%
  DBLP:journals/anor/BanbaraIKOSSTW19,%
  DBLP:journals/tplp/BanbaraKOS17,%
  ASPAISAT}．
配電網(遷移)問題に対して ASP を用いる利点としては，
ASP 言語の高い表現力，
高速な解列挙，
遷移問題を解くために有用なマルチショットASP解法
などが挙げられる．

配電網問題は主に配電損失を最小にする最適化問題として古くから継続的に研
究されており，これまでに，メタヒューリスティックス，整数計画法，フロン
ティア法など数多くの解法が提案されている~\cite{%
  ChiJum90,
  Hayashi:dnet:model,
  Minato:dnet:ZDD,
  DBLP:journals/tsg/InoueTWKYKTMH14}．
しかしながら，著者らの知る限り，解集合プログラミングを用いた解法は存在しない．
また，配電網遷移問題を解くアルゴリズム，ヒューリスティックス
などの実践的な研究開発はまだ始まったばかりであり，実用的なソルバーの実
装技術は確立されているとはいえない．

%------------------------------------------
\input{arch}
%------------------------------------------

本論文では，電気制約として電流制約のみを考慮した配電網問題および配電網
遷移問題に対して，解集合プログラミング(ASP)を用いた解法を提案する．
提案解法では，まず与えられた問題インスタンスを ASP のファクト形式に変
換した後，そのファクトと配電網(遷移)問題を解くための ASP 符号化を結合
した上で，
高速 ASP システム{\clingo}~\footnote{\url{https://potassco.org/clingo/}}
を用いて解を求める(図~\ref{fig:arch}参照)．

配電網問題を解くための ASP 符号化は，トポロジ制約，電流制約の2つのパー
トから構成される．さらに，トポロジ制約は非閉路制約と根付き連結制約の2つ
から構成される．
トポロジ制約に対して，基本符号化，改良符号化，有向符号化の3つを考案した．
基本符号化は，根付き連結制約を \textit{at-least-one} 制約と \textit{at-most-one} 制約で
表現した基本的な符号化である．
改良符号化は，根付き連結制約を ASP の個数制約で表現することにより，
基礎化後のルール数を少なく抑えられる．
有向符号化は，無向グラフの各辺$u-v$に対して，2つの弧
$u\rightarrow v$と$v\rightarrow u$を対応させることで有向グラフ
化して解く符号化である．
この有向グラフ化により，非閉路制約を簡潔に表現できる．

配電網遷移問題を解くには，複数の配電網問題を繰り返し解く必要がある．
しかし，各問題中の制約の大部分は共通であるため，ASP システムが同一の
探索空間を何度も調べることになり，求解効率が低下するという問題点がある．
この問題を解決するために，マルチショット ASP 解法~\cite{DBLP:conf/rweb/KaminskiSW17}
を利用した符号化を提案する．
この符号化は，配電網問題の ASP 符号化の自然な拡張となっている．
マルチショット ASP 解法を利用することにより，
ASP システムが同様の探索失敗を避けるために獲得した学習節を
(部分的に)保持することで，無駄な探索を行うことなく，制約を追加した論理
プログラムを連続的に解くことができる．



提案解法の有効性を評価するために，
DNET (Power Distribution Network Evaluation Tool)~\footnote{%
\url{https://github.com/takemaru/dnet}}
に公開されている配電網問題(全3問)と，
Graph Coloring and its Generalizations~\footnote{%
\url{https://mat.tepper.cmu.edu/COLOR04/}}
に公開されているグラフを基に独自に生成したトポロジ制約のみの配電網問題
(全82問)を用いて実行実験を行なった．
その結果，有向符号化は，基本符号化と改良符号化と比較して，より多くの問
題をより高速に解くことが確認できた．
%
配電網遷移問題の実行実験については，DNETで公開されている実用規模の
問題({\sf fukui-tepco})に対して，実行可能解のペアをランダムに選び，
合計 1000 問の配電網遷移問題を生成しベンチマーク問題として使用した．
その結果，すべての問題の到達可能性を判定することができ，
得られた最短ステップ長の最大値は7であった．

% 本稿の構成は以下の通りである．
% \ref{chap:problem}節で根付き全域森の定義を示し，
% \ref{chap:asp}節で解集合プログラミングの説明を行う．
% \ref{chap:encode}節で根付き全域森問題のASP符号化を示し，
% \ref{chap:core}節で根付き全域森問題を遷移問題へ拡張を行う．
% \ref{chap:exp}節で評価実験とその考察を述べ，最後に，
% \ref{chap:conc}節で本稿をまとめる．

%%% Local Variables:
%%% mode: japanese-latex
%%% TeX-master: "paper"
%%% End:
