\section{はじめに}\label{chap:intro}

電力網の構成制御は，エネルギーの節約や安定した電力供給を支える重要な研
究課題である\cite{25627,103687}．電力網は，高電圧で発電所と変電所を結ぶ
\textbf{送電網}と，低電圧で変電所と家庭や工場といった需要家を結ぶ\textbf{配電網}
に分類される．配電網は変電所と需要家との間で構成される電力供給ネットワークであり，
その構成技術はスマートグリッドや，災害時の障害箇所の迂回構成などを支える重要な
基盤技術である．

\textbf{配電網問題}は，供給経路に関する\textbf{トポロジ制約}と，電流・電圧に関する
\textbf{電気制約}を満たしつつ，電力の損失を最小にするスイッチの開閉状態を求めること
が目的である~\cite{Hayashi:dnet:model}．トポロジ制約は，短絡(供給経路上のループ，
複数の変電所と結ばれる需要家)と停電(変電所と結ばれない需要家)が発生しないことを保証
する．電気制約は，供給経路の各区間で許容電流を超えないこと，電気抵抗による電圧降下が
許容範囲を超えないことを保証する．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[tbp]
 \centering
 \scalebox{0.8}{\input{tikz/tikz-dnet}}
 \caption{配電網問題の例}
 \label{fig:dnetgraph}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

トポロジ制約のみの配電網問題の例を図\ref{fig:dnetgraph}に示す．この例は，2つの変電所
$\{SS_{1}, SS_{2}\}$，7個のスイッチ$\{s_{1},\ldots, s_{7}\}$，6つの需要家
$\{c_{1},\ldots, c_{6}\}$から構成されている．$\blacksquare$は閉じたスイッチ，
$\square$は開いたスイッチを表している．配電網問題の実行可能解は閉じたスイッチの
集合で表すことができる．この例は実行可能解$\{s_{1},s_{3},s_{5},s_{7}\}$を表している．
需要家$\{c_{1},c_{2},c_{4}\}$は変電所$SS_{1}$から，
需要家$\{c_{3},c_{5},c_{6}\}$は変電所$SS_{2}$から電力を供給され，
トポロジ制約を満たしていることがわかる．

配電網問題は求解困難な組合せ最適化問題の一種であり，
これまでフロンティア法を用いた解法等が提案されている~\cite{Minato:dnet:ZDD}．
本研究ではトポロジ制約のみの配電網問題を対象とする．トポロジ制約のみの配電網問題は，
与えられた連結グラフと根と呼ばれる特殊なノードから，\textbf{根付き全域森}を求める
部分グラフ探索問題に帰着できることが知られている．以降，この問題を
\textbf{根付き全域森探索問題}と呼ぶ．

\textbf{解集合プログラミング}(Answer Set Programing; ASP\cite{%
  Baral03:cambridge,%
  Gelfond88:iclp,%
  Niemela99:amai,%
  Inoue08:jssst})は，
論理プログラミングから派生したプログラミングパラダイムである．ASP言語は，一階論理に
基づく知識表現言語の一種であり，論理プログラムはASPのルールの有限集合である．
ASPシステムは論理プログラムから安定モデル意味論\cite{Gelfond88:iclp}に基づく解集合を
計算するシステムである．近年，SATソルバーの技術を応用した高速なASPシステムが確立され，
制約充足問題，プランニング，システム生物学，時間割問題，システム検証など様々な分野への
実用的応用が急速に拡大している\cite{ASPAISAT}．

本稿では，解集合プログラミング(ASP)を用いた根付き全域森探索問題の解法について述べる．
まず，根付き全域森探索問題を解く2種類のASP符号化に関して，基本符号化と改良符号化を
考案した．これらの符号化は，根付き全域森の制約を7つまたは6つのASPのルールで
簡潔に表現している．基本符号化は，根付き全域森の根付き連結制約を
at-least-one制約とat-most-one制約で表現した基本的な符号化に対し，
改良符号化は，根付き連結制約をASPの個数制約を用いて表現している点が特長である．
改良符号化は，基本符号化と比較すると符号化適用後の制約数を少なく抑えることができるため，
大規模な問題に対する有効性が期待できる．

%%%%%%
また，障害時の復旧予測への応用を狙いとした，ある初期配電網の構成からスタートして，
トポロジ制約を満たした上で，一度に切り替えるスイッチの数を$k$個以下に制限し，
最終的に目的とする配電網の構成を得るためのスイッチの切り替え手順を求める遷移問題
への拡張を行い，解を探索するための手法として，外部プログラムによって繰り返しASPシステム
を呼び出し探索する手法と，ASPシステム\clingo のライブラリを利用した探索手法を考案した．
ライブラリを利用することで，ASPシステムの呼び出しが1回で済むため，起動時のオーバヘッドの
短縮につながり，高速に解が得られると期待できる．また，探索の中で部分的に学習節を共有
できるため，高速化につながると期待できる．

今回行った実験では，考案した符号化の有効性を評価するために，
DNET (Power Distribution Network Evaluation Tool)~\footnote{%
\url{https://github.com/takemaru/dnet}}
に公開されている問題(3問)と，
Graph Coloring and its Generalizations~\footnote{%
\url{https://mat.tepper.cmu.edu/COLOR04/}}
に公開されているグラフ問題を元に生成した問題(82問)を用いて，実行実験を行なった．
その結果，改良符号化は，基本符号化より多くの問題を解くことに成功した．
また，応用符号化はスイッチ数が40,000個を超えるような大規模な問題も解いており，
配電網問題に対するASPの有効性が確認できた．

本稿の構成は，
\ref{chap:problem}節で根付き全域森の定義を示し，
\ref{chap:asp}節で解集合プログラミングの説明を行う．
\ref{chap:encode}節で根付き全域森問題のASP符号化を示し，
\ref{chap:trans}節で根付き全域森問題を遷移問題へ拡張を行い，
\ref{chap:exp}節で評価実験とその考察を述べる．
\ref{chap:conc}節で本稿についてまとめる．


%%% Local Variables:
%%% mode: japanese-latex
%%% TeX-master: "paper"
%%% End:
