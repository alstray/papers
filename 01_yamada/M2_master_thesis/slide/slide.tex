\documentclass[dvipdfmx,11pt]{beamer}

\usepackage[deluxe]{otf} 
\usepackage{txfonts}
\renewcommand{\kanjifamilydefault}{\gtdefault}
\usepackage{amssymb,amsmath}
\usepackage{hyperref}
\usepackage[absolute,overlay]{textpos}
\usepackage{comment}
\usepackage{colortbl}
\usepackage{graphicx}
\usepackage{tikz}
\usetikzlibrary{positioning}
\usetikzlibrary{shadows}
\usetikzlibrary{calc}
\usepackage{listings}
\usepackage{plistings}
\usepackage{multicol}
\usepackage{multirow}
\usepackage{caption}
\def\lstlistingname{コード}
\newcommand{\code}[1]{\lstinline[basicstyle=\ttfamily]{#1}}
\newcommand{\lw}[1]{\smash{\lower-5.ex\hbox{#1}}}
\newcommand{\redunderline}[1]{\textcolor{red}{\underline{\textcolor{black}{#1}}}}
%%\usetheme{Frankfurt}
\usetheme{Warsaw}
\setbeamertemplate{navigation symbols}{} %スライドのボタン?(右下のやつ)を消す
\setbeamersize{text margin left=1.5em,text margin right=1.5em} % 余白なくすやつ

% footer setting %
\makeatother
\setbeamertemplate{footline}
{
  \leavevmode%
  \hbox{%
  \begin{beamercolorbox}[wd=.4\paperwidth,ht=2.25ex,dp=1ex,center]{author in head/foot}%
    \usebeamerfont{author in head/foot}\insertshortauthor
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.6\paperwidth,ht=2.25ex,dp=1ex,center]{title in head/foot}%
    \usebeamerfont{title in head/foot}\hspace*{1ex} \insertshorttitle\hspace*{3em}
    \textbf{ \insertframenumber{} / \inserttotalframenumber } \hspace*{1ex}
  \end{beamercolorbox}}%
  \vskip0pt%
}
\makeatletter

% exclude apprendix slides from framenumber %
\newcommand{\backupbegin}{
   \newcounter{framenumberappendix}
   \setcounter{framenumberappendix}{\value{framenumber}}
}
\newcommand{\backupend}{
   \addtocounter{framenumberappendix}{-\value{framenumber}}
   \addtocounter{framenumber}{\value{framenumberappendix}} 
}

\lstset{
 basicstyle=\ttfamily\color{black},
 keepspaces=true,
 escapechar=|,
 columns=[l]{fullflexible},
 commentstyle={\color{red}},
 stringstyle={\color{blue}}}

\title{解集合プログラミングを用いた\\配電網問題の解法に関する研究}
\author[山田 健太郎]{山田 健太郎}
\date{2022年2月10日\\前期課程修士論文審査会}
\institute{番原研究室}

%#################################################
%# 本文 ##########################################
%#################################################
\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% タイトル 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \titlepage
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 配電網
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{配電網問題}
  \begin{alertblock}{}\centering
    求解困難な組合せ最適化問題の一種
  \end{alertblock}
  \vfill
  \begin{itemize}
  \item \alert{\bf 配電網}とは，変電所と，一般家庭や工場を繋ぐ電力供給
    経路のネットワークである．
  \item  配電網の構成技術はスマートグリッドや，災害時の停電復旧
         などを支える重要な基盤技術として期待されている．
  \item \alert{\bf 配電網問題}とは，
    \begin{itemize}
    \item \structure{\bf トポロジ制約}と\structure{\bf 電気制約}を満たしつつ，
    \item 損失電力を最小にするスイッチの開閉状態を求めることが目的．
    \end{itemize}
  \item これまで，メタヒューリスティクス等の解法が提案されている．
  \item 厳密解法として，フロンティア法を用いた解法が提案されている．
    \begin{itemize}
    \item 実用規模の配電網問題(\structure{\textsf{\bf fukui-tepco}，\textbf{スイッチ数468個}})の
      最適解を求めることに成功~[井上ほか '12]．
    \end{itemize}
  \end{itemize}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 配電網問題の例
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{配電網問題の例}
 
 \begin{block}{配電網問題}
  与えられた配電網$D=(S,SW)$から，以下の制約を満たす
  配電網の構成(スイッチの開閉状態$X$)が存在するかどうかを判定する問題．
%  \vspace{-0.5em}
 \begin{itemize}\small
  \item $X ~\textrm{によって定まる配電網構成に停電と短絡が発生しない}$ (\textbf{トポロジ制約})
  \item $J_i = \displaystyle\sum_{j\in S_i^{down}} I_j, \quad J_i \leq J^{max} 
        \quad (\forall s_{i}\in S)\qquad\qquad\qquad\qquad\quad~~$ (\textbf{電流制約})
 \end{itemize}
 \end{block}
  \begin{columns}
    \begin{column}{0.45\textwidth}\centering
      \begin{exampleblock}{入力例}
	\centering
	\scalebox{0.3}{\input{tikz/tikz-test-input}}
      \end{exampleblock}
    \end{column}
    \begin{column}{0.05\textwidth}\centering
      $\Rightarrow$
    \end{column}
    \begin{column}{0.45\textwidth}\centering
      \begin{exampleblock}{解の例}
        \centering
        \scalebox{0.3}{\input{tikz/tikz-test-output}}
      \end{exampleblock}
    \end{column}
  \end{columns}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 解の遷移問題
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{配電網遷移問題}
 \begin{block}{配電網遷移問題}
  配電網問題とその2つの実行可能解が与えられたとき，
  一方の解から他方の解へ，\alert{\bf 遷移制約}を満たしつつ，
  実行可能解のみを経由して到達できるかどうかを判定し，
  到達可能であればその最短経路を求める問題．
  \begin{itemize}
  \item 各ステップ$t$で変更可能なスイッチを$d$個以下に制限．(\textbf{遷移制約})
  %\item 最短ステップ長での辺の変更手順を求めることが目的となる．
  \end{itemize}
 \end{block}
 \begin{itemize}
  \item 配電網の構成制御における災害時の停電復旧などへの応用が狙い．
  \item 配電網遷移問題を解く実用的なソルバーの実装技術は確立されていない．
 \end{itemize}
 \vspace{-0.3cm}
  \begin{columns}
    \begin{column}{0.45\textwidth}\centering
      \begin{exampleblock}{例：スタート状態}
	\centering
	\scalebox{0.25}{\input{tikz/tikz-test-core-0}}
      \end{exampleblock}
    \end{column}
    \begin{column}{0.05\textwidth}\centering
      $\Rightarrow$
    \end{column}
    \begin{column}{0.45\textwidth}\centering
      \begin{exampleblock}{例：ゴール状態}
        \centering
        \scalebox{0.25}{\input{tikz/tikz-test-core-3-ex}}
      \end{exampleblock}
    \end{column}
  \end{columns}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 配電網遷移問題の例
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{配電網遷移問題の例(1/4)}
 \vfill
 \begin{figure}[t]
  \centering
  \scalebox{0.65}{\input{tikz/tikz-test-core-0}}
  \vspace{-0.1cm}
  \caption*{\structure{$\mathbf{t=0}$ \textbf{(スタート状態)}}}
 \end{figure}
\end{frame}
%
\begin{frame}{配電網遷移問題の例(2/4)}
  \vfill
 \begin{figure}[t]
  \centering
  \scalebox{0.65}{\input{tikz/tikz-test-core-1}}
  \vspace{-0.1cm}
  \caption*{\structure{$\mathbf{t=1}$}}
 \end{figure}
\end{frame}
%
\begin{frame}{配電網遷移問題の例(3/4)}
  \vfill
 \begin{figure}[t]
  \centering\hspace{-0.1cm}
  \scalebox{0.65}{\input{tikz/tikz-test-core-2}}
  \vspace{-0.1cm}
  \caption*{\structure{$\mathbf{t=2}$}}
 \end{figure}
\end{frame}
%
\begin{frame}{配電網遷移問題の例(4/4)}
  \vfill
 \begin{figure}[t]
  \centering\hspace{-0.1cm}
  \scalebox{0.65}{\input{tikz/tikz-test-core-3}}
  \vspace{-0.1cm}
  \caption*{\structure{$\mathbf{t=3}$ \textbf{(ゴール状態)}}}
 \end{figure}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% ASP
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{解集合プログラミング(Answer Set Programming; ASP)}
 \begin{itemize}
  \item \structure{\bf ASPの言語}は一階論理に基づく知識表現言語の一種である．
  \item \structure{\bf ASPシステム}は論理プログラムから安定モデル意味
        論~[Gelfond and Lifschitz '88]に基づく解集合を計算するシステムである．
  \item 近年，SATソルバーの実装技術を応用した高速ASPシステムが実現され，
        システム検証，プランニング，システム生物学など様々な分野への応用が
        拡大している．
 \end{itemize}
 \vfill
 \begin{alertblock}{配電網(遷移)問題に対してASP技術を用いる利点}
  \begin{itemize}
   \item ASP言語の高い表現力を生かし，各種制約を\textbf{簡潔に記述可能}
   \item マルチショットASP解法により，ステップ長を増やしながら到達可能性を
         \textbf{効率的に判定可能}
   \item 背景理論つきASPにより，様々な\textbf{背景理論ソルバーと連携可能}
   %\item 解の最適性を保証でき，最適解の列挙も可能
  \end{itemize}
 \end{alertblock} \vfill
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 研究目的
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{研究目的}
  \begin{alertblock}{目的}
\begin{itemize}
 \item ASP技術を活用して，大規模な配電網遷移問題を効率良く解くシステムを構築
       する．
 \item 実用規模のベンチマーク問題を使ってシステムを評価し，ASP の特長を活かした
       配電網の構成技術の利点・実用性を明らかにする.
\end{itemize}
  \end{alertblock}
  \vfill
 \begin{block}{研究内容}
  \begin{enumerate}
   \item \structure{\bf 配電網問題のASP符号化}
   \begin{itemize}
    \item トポロジ制約のASP符号化を2種類考案(卒業研究)．
    \item \alert{\bf 新たにトポロジ制約のASP符号化を1種類考案．}
    \item \structure{\bf 電流制約に関するASP符号化を考案．}
   \end{itemize}
   \item \alert{\bf 配電網遷移問題のASP符号化}
   \begin{itemize}
    %\item 配電網の構成制御における災害時の停電復旧などへの応用が狙い．
    \item \textbf{マルチショットASP解法}を用いた配電網遷移ソルバーを実装．
   \end{itemize}
   \item \alert{\bf 実用規模の問題を含むベンチマークによる評価実験}
  \end{enumerate}
 \end{block}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 提案手法
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}\frametitle{(提案)配電網問題のASP符号化}
 
\begin{itemize}
 \item  トポロジ制約のASP符号化を新たに1つ考案した．
% \item $|V|$はグラフのノード数，$|R|$は根ノード数をそれぞれ表す．
\end{itemize}
 
\begin{table}[t]
 \centering
 \input{table/proposal}
\end{table}

 \begin{itemize}
  \item 根付き連結制約にASPの個数制約を用いることで，基礎化後のルール数を少なく抑えられる．
  \item 有向符号化は，無向グラフの各辺$u-v$に対して，2つの弧$u\rightarrow v$と
        $v\rightarrow u$を対応させることで有向グラフ化して解く符号化である．
  \item これにより，非閉路制約をノードの入次数の制約で表現可能．
 \end{itemize}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 提案アプローチ
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{(提案)配電網遷移問題のASP符号化}
 \begin{itemize}
  \item 配電網遷移問題のASP符号化を2種類考案した．
 \end{itemize}
 \begin{block}{シングルショット符号化 (配電網問題のASP符号化の自然な拡張)}
    \begin{itemize}
    \item 与えられたステップ長$t$の解が存在するかを判定する．
      % \begin{itemize}
      % \item 与えられたステップ長$t$の解が存在するかを判定する．
      % \item 各アトムにステップ長を表す項\code{T}を追加．例) \code{inForest(X,Y,T)}
      % \item スタート状態，ゴール状態，遷移制約に関するルールを追加．
      % \end{itemize}
    \item 解が見つかるまで，ステップ長$t$を増やしながら，複数の問題を
      繰り返し解く必要がある．
    \item 各問題中の制約の大部分は共通であるため，
      \textbf{同一の探索空間を何度も調べる}ことになり，
      \textbf{求解効率が低下}するという問題点がある．
  \end{itemize}
 \end{block}
 \vfill
 \begin{alertblock}{マルチショット符号化}
   \begin{itemize}
   \item ASPシステム\textit{clingo}のマルチショット解法ライブラリを使用．
   \item 同様の探索失敗を避けるために獲得した学習節を保持することによって，
		 \textbf{無駄な探索を行うことなく}，制約を追加した論理プログラムを
		 連続的に解くことができる．
  \end{itemize}
 \end{alertblock}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
%% 実験内容
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{実験概要}
  \renewcommand{\thefootnote}{\fnsymbol{footnote}}
  \setcounter{footnote}{1}
 \small
 \begin{block}{配電網問題}
  \begin{itemize}
   \setlength{\parskip}{0cm} % 段落間
   \setlength{\itemsep}{0cm} % 項目間
   \item \structure{\bf 比較するASP符号化:}
   \begin{itemize}
    \item 基本符号化，改良符号化，有向符号化
   \end{itemize}
   \item \structure{\bf ベンチマーク問題:} 全85問
         \begin{itemize}
          \item DNET \footnotemark%
                で公開されている配電網問題 3問 \\(トポロジ制約のみ，スイッチ数: 16個，36個，\alert{\bf 468個})
          \item グラフ彩色問題 \footnotemark%
                をベースに生成した82問 \alert{\bf (20個 $\sim$ 49,629個)}
         \end{itemize}  
  \end{itemize}
 \end{block}
 \setcounter{footnote}{2}
 \footnotetext{https://github.com/takemaru/dnet}%
 \setcounter{footnote}{3}
 \footnotetext{%\textit{Graph Coloring and its Generalizations}
 https://mat.tepper.cmu.edu/COLOR04/}
 \vfill
 \begin{block}{配電網遷移問題}
  \begin{itemize}
   \setlength{\parskip}{0cm} % 段落間
   \setlength{\itemsep}{0cm} % 項目間
   \item \structure{\bf 比較するASP符号化:} シングルショット符号化，マルチショット符号化
   \item \structure{\bf ベンチマーク問題:} 全1000問 \\
         (\textsf{fukui-tepco}，スタート状態10個，
         ゴール状態100個)
  \end{itemize}
 \end{block}
  \vfill
 \begin{exampleblock}{}
  \begin{itemize}
   \setlength{\parskip}{0cm} % 段落間
   \setlength{\itemsep}{0cm} % 項目間
   \item \structure{\bf ASPシステム:} \textit{clingo-5.4.0} $+$ \textit{trendy}
   \item \structure{\bf 実験環境:} Mac mini，3.2GHz Intel Core i7，64GBメモリ
  \end{itemize}
 \end{exampleblock}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% カクタスプロット
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{配電網問題：カクタスプロット}
 \begin{figure}[h]
  \centering
  \includegraphics[scale=0.4]{fig/cactus.png}
 \end{figure}

\begin{itemize}
 \item 有向符号化は，他の符号化と比較して，より多くの問題を高速に解いている．
\end{itemize}\vfill
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 辺の数の表
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{配電網問題：解けた問題数による比較}
 
%\begin{textblock*}{\linewidth}(10pt, 30pt)
\begin{table}[t]
 \centering
 \input{table/table}
\end{table}\vfill

\begin{itemize}
 \item 有向符号化は，ベンチマーク問題85問中，\textbf{84問}を解いている．
 \item 大規模な問題に対しても有向符号化は，優位性を示した．
\end{itemize}\vfill
%\end{textblock*}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 実験結果--遷移問題
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{配電網遷移問題：平均CPU時間の比較}
 \centering
 \vskip -2ex
 \scalebox{0.8}{\input{table/core-experiment}}
 \vskip 1em
\begin{itemize}
 \item 1000問全ての到達可能性を判定でき，全て到達可能であった．
 \item 今回生成した問題のうち，最長で最短ステップ数は7であった．
 \item マルチショット符号化は，シングルショット符号化と比較して，全ての
	   問題をより高速に解いており，\alert{\bf 平均で3.8倍の高速化}を実現している．
\end{itemize}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% まとめ
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{まとめと今後の課題}
 \begin{block}{まとめ}
 \begin{enumerate}
   \item \structure{\bf 配電網問題のASP符号化}
   \begin{itemize}
    \item トポロジ制約のASP符号化として\textbf{有向符号化}を新たに考案．
    \item 実用規模のベンチマーク問題を用いて，有向符号化の優位性を確認．
   \end{itemize}
   \item \structure{\bf 配電網遷移問題のASP符号化}
   \begin{itemize}
    \item 配電網における災害時の停電復旧などに応用．
    \item \textbf{シングルショット符号化}と\textbf{マルチショット符号化}の2種類のASP符号化を考案．
    \item マルチショット符号化は，シングルショット符号化と比較して，\\ 
          \textbf{平均で3.8倍の高速化}を実現．
   \end{itemize}
 \end{enumerate}
 \end{block}
 \vfill
 \begin{alertblock}{今後の課題}
  \begin{itemize}
   \item 電圧制約を含む完全な配電網(遷移)問題への拡張
  \end{itemize}
 \end{alertblock}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 研究業績
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{研究業績}
 \begin{itemize}
  \small
  \item \alert{\bf 学生奨励賞受賞}\\
        山田健太郎，湊真一，番原睦則．解集合プログラミングを用いた配電網問題の解法に関する一考察．
        日本ソフトウェア科学会第37回大会講演論文集，3-L，日本ソフトウェア科学会，2020年9月8日．
  \item \alert{\bf カテゴリ1 採録}\\
        山田健太郎，湊真一，田村直之，番原睦則．解集合プログラミングを用いた配電網問題の解法．
        第24回プログラミングおよびプログラミング言語ワークショップ．
 \end{itemize}
\end{frame}
%###########################################################
%##### 補助スライド ########################################
%###########################################################

%\input{subslide}

\end{document}
%%% Local Variables:
%%% mode: japanese-latex
%%% TeX-master: t
%%% End:

