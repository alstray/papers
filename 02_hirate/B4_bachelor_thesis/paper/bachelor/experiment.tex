%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
\chapter{実行実験}\label{chap:experiment}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 

本章では，前章で提案した3つの符号化
\textsf{undirected}，\textsf{directed}，\textsf{acyclicity}
の性能を評価するために実行実験を行った．
%
実験に使用したベンチマーク問題集(計495問)は，以下の通りである．
\begin{itemize}
\item \textsf{color04} (計127問)\\
  グラフ彩色問題の国際競技会
  COLOR02/03/04~\footnote{\url{https://mat.tepper.cmu.edu/COLOR02/}}
  で使用された問題インスタンス．
\item \textsf{complete} (計15問)\\
  SATソルバーを用いた既存研究~\cite{soh14:jelia2014}で提供された
  完全グラフのインスタンス~\footnote{\url{https://tsoh.org/scarab/jelia2014/}}．
\item \textsf{knight} (計11問)\\
%  \cite{DBLP:conf/sat/EenS03}で用いられた
  $N\times N$の騎士巡回問題(Knight's Tour)のインスタンス．\\
  $N=8,12,20,30,40,50,60,70,80,90,100$の11通り．
\item \textsf{tsplib} (9問)\\
  巡回セールスマン問題のポータルサイトTSPLIBに公開されている
  インスタンス\footnote{\url{http://comopt.ifi.uni-heidelberg.de/software/TSPLIB95/hcp/}}．
\item \textsf{grid} (12問)\\
  $N$次の正方グリッドグラフのインスタンス($6\leq N\leq 17$)．
\item \textsf{random} (320問)\\
  SATソルバーを用いた既存研究~\cite{soh14:jelia2014}で提供された
  ランダムグラフのインスタンス~\footnote{\url{https://tsoh.org/scarab/jelia2014/}}．
\item \textsf{usmap} (1問)\\
  図~\ref{fig:USmap}に示されたグラフ．
  D.~E~.Knuth の教科書
  The Art of Computer Programming~\cite{Knuth:TAOCP:SAT}
  に記載されている最短ハミルトン路問題の例.
\end{itemize}

使用した ASP システムは{\clingo}のバージョン5.4.0である．
実験環境は，Mac mini Intel Corei7 3.2GHz 64GBメモリである．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{ハミルトン閉路問題の実験結果}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{fig/cyclesat_table.tex}%label{sat_table}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[tb]
\begin{center}
  \includegraphics[width=0.6\linewidth]{fig/cactus.png}
\caption{ハミルトン閉路問題: カクタスプロット (\textsf{SAT+UNSAT})}
\label{cactus}
\end{center}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[tb]
\begin{center}
  \includegraphics[width=0.6\linewidth]{fig/cactussat.png}
\caption{ハミルトン閉路問題: カクタスプロット (\textsf{SAT})}
\label{cactussat}
\end{center}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[tb]
\begin{center}
\includegraphics[width=0.6\linewidth]{fig/cactusunsat.png}
\caption{ハミルトン閉路問題: カクタスプロット (\textsf{UNSAT})}
\label{cactusunsat}
\end{center}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%--
オプションは\textit{trendy}，一問あたりの時間制限を30分とした．
用いたベンチマーク問題は，\textsf{color04}，\textsf{complete}，\textsf{knight}，\textsf{tsplib}，\textsf{grid}，\textsf{random}である．

%--
表~\ref{sat_table}に，各符号化で解けた問題数を示す．
ベンチマーク問題の種類ごとに，
\textsf{SAT}，
\textsf{UNSAT}，
\textsf{SAT+UNSAT}と解いた問題数を集計した．
\textsf{SAT+UNSAT}の問題数については,\textsf{undirected}符号化と\textsf{acyclicity}符号化が最大だった．
\textsf{SAT}の問題数については，\textsf{undirected}符号化が最大だった．
\textsf{UNSAT}の問題数については，\textsf{directed}符号化と\textsf{acyclicity}符号化が最大だった．

%--
図~\ref{cactus}に，\textsf{SAT+UNSAT}のカクタスプロットを示す．
縦軸は問題を解くのに要した CPU 時間，横軸は解けた問題数を表す．
グラフが右によるほど多くの問題を解けたことを示し，
下によるほどより速く解けたことを示す．
図~\ref{cactus}より，\textsf{acyclicity}符号化は，解けた問題数が同じ
\textsf{undirected}符号化と比較して，より高速に問題を説いていることが
確認できた．

%--
次に，図~\ref{cactussat}と図~\ref{cactusunsat}に，
\textsf{SAT}と\textsf{UNSAT}のカクタスプロットを示す．
図~\ref{cactussat}より，\textsf{SAT}のみの場合は，
\textsf{SAT+UNSAT}と比べて，符号化の優劣に差は見られなかった．
一方で，
図~\ref{cactusunsat}から，\textsf{UNSAT}のみの場合は，
\textsf{acyclicity}符号化と\textsf{undirected}符号化の優劣が逆転した．

%--
これらの結果から，
\textsf{SAT}な問題に対しては，解けた問題数と解くのに要したCPU時間
のどちらにおいても\textsf{acyclicity}符号化が優秀であったことがわかる．
一方で，\textsf{UNSAT}な問題に対しては，
解けた問題数では\textsf{directed}符号化と\textsf{acyclicity}が
解くのに要したCPU時間では\textsf{undirected}符号化が優秀であったことがわかる．

%--
表~\ref{sat_table}より，
\textsf{SAT+UNSAT}の問題数については,
\textsf{undirected}符号化と\textsf{acyclicity}符号化は同数だった．
しかし，その内訳には差があった．
結果に差があった問題は，\textsf{3-FullIns\_5}と\textsf{grid12}で，
それぞれ\textsf{color04}の\textsf{SAT}と，
\textsf{grid}の\textsf{UNSAT}に属する．
\textsf{3-FullIns\_5}は\textsf{undirected}に解けて
\textsf{acyclicity}に解けなかった．
一方で，\textsf{grid12}は，\textsf{acyclicity}に解けて
\textsf{undirected}に解けなかった．

\textsf{3-FullIns\_5}は\textsf{SAT}であったことから，
\textsf{undirected}符号化は\textsf{3-FullIns\_5}でハミルトン閉路を
偶然速く見つけられたと考える．
%% \textsf{color04}の他の問題を見ても，
%% \textsf{undirected}符号化が優秀であることを示してはいない．
%% 変数の数や制約の数も少なくない．
\textsf{grid12}については，変数の数や制約の数において，
\textsf{acyclicity}符号化が少ない値を示していたため，
要するCPUtimeを短縮できたと考える．

%% \textsf{grid12}は，\textsf{UNSAT}の問題に限定すれば
%% 要したCPU時間において優秀だった\textsf{undirected}符号化にのみ
%% 解けていなかった．
%% この問題の他にも,\textsf{grid}かつ\textsf{UNSAT}な問題を
%% 確認した．
%% \textsf{undirected}符号化がどの問題でも，
%% もっとも多く時間を要していた．
%% \textsf{undirected}符号化は\textsf{UNSAT}な\textsf{grid}問題が
%% 苦手であると考える．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{最短ハミルトン閉路問題}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{fig/min_table_tr.tex}%\label{min_table_tr}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%--
オプションは\textit{trendy}，一問あたりの時間制限を3時間とした．
ベンチマーク問題として，\textsf{grid}と\textsf{usmap}を用いた．

%--
表\ref{min_table_tr}に，各符号化で
時間内に求められた最短距離を示す．
赤文字が，3符号化を比較した際の最良値である．
*マークは，時間内に最適解が求められたことを表している．
Bestは，符号化ごとに赤文字の個数を集計した値である．
Bestの値がもっとも大きかった\textsf{undirected}が優秀な性能を示した．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{コスト制約付きハミルトン路問題}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{fig/cost_table.tex}%\label{cost_table}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%--
オプションは\textit{crafty}，一問あたりの時間制限を3時間とした．
ベンチマーク問題として\textsf{usmap}を用いた．
閾値は表\ref{cost_table}にあるように11698〜18716までの10の値を与えた．

%--
表~\ref{cost_table}に閾値ごとの解の個数と
各符号化が要したCPU時間をまとめた．
赤文字が3符号化の中での最短時間を表している．
Averageは，各符号化のCPU時間の平均値を示す．
Bestは，各符号化ごとの赤文字の個数を示す．

%--
Bestより，10の閾値の内の7つにて\textsf{acyclicity}が最短時間で解いている．
Averageでも，\textsf{acyclicity}が最小である．
以上より，\textsf{acyclicity}がもっとも優秀であった．
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "paper"
%%% End:
