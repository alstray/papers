\section{評価実験}

\subsection{destroy 演算の実装}
LNPS では，
暫定解のどの値割り当てを取り消すかに依存しすぎない探索を行うことが可能であると
述べたが，
それでも LNPS の性能には，
適切な destroy 演算を設計する必要がある．
今回実装した複数の destroy 演算の説明をするにあたって，
解く問題の性質を利用したものもあるため，
まず簡単に今回使用した問題である時間割問題について述べる．

本研究で対象とした時間割問題は，
カリキュラムベース・コース時間割問題で，
時間割問題の中でも最も研究が盛んな時間割問題の一つである．
カリキュラムベース・コース時間割は
必ず満たすべきハード制約と，
できるだけ満たしたい重み付きソフト制約から構成され，
違反する制約の重み（ペナルティ）の最小化が目的である．
ハード制約を満たしながら与えられた講義をそれぞれの日時と教室に割り当て，
「受講者数が，教室の収容人数を超えた分だけペナルティが与えられる」などといった
ソフト制約によって目的関数の値が決まる．\\

次に実装した 4 種類の destroy 演算について説明を行う．
    \begin{enumerate}
    \item random $N$\\
       暫定解の値割り当ての中からランダムに$N$\% を選んで取り消す．
       $N$ として０も選択可能であり，その場合，
       解を取り消さずに暫定解の全ての値割り当てに対して優先度を上げる．
       そのため，
       暫定解の値割り当てに近い値割り当ての解への探索を促進させることが狙いとなる．
       値割り当てをある程度の割合で取り消す場合は，
       暫定解の近辺を探索しながら，
       局所的最適解に陥らないようにさせることを狙いとしている．
    \item day-period\\
      ランダムに曜日と時限をそれぞれ一つ選択し，
      選択した曜日の選択した時限に割り当てられている値割り当てを全て取り消す．
      この destroy 演算は，
      割り当てられる教室の変更を促進させ，
      教室に関するソフト制約へのペナルティを改善することを狙いとしている．
  \item day-room\\
   ランダムに曜日と教室をそれぞれ一つ選択し，
   選択した曜日の選択した教室に割り当てられている値割り当てを全て取り消す．
   この destroy 演算は，
   割り当てられる時限の変更を促進させ，
   時限に関する制約へのペナルティを改善することを狙いとしている．
  \item swap-room $N$\\
    暫定解からランダムに$N$\%の値割り当てを選び，
    曜日と時限はそのままで，割り当てられている教室の情報を取り消す．
   この destroy 演算は，
   day-room と比較して割り当てられる教室のみの変更を促進させ，
   より教室に関するソフト制約へのペナルティを改善することを狙いとしている．
    
  \end{enumerate}


提案手法の有効性を評価するために，実行実験を行った．
ベンチマーク問題には，国際時間割競技会 ITC2007 の comp01〜21の
全21問を使用し，
ソフト制約の多い問題集(UD5)を使用した．
実験に使用した手法としては，
既存 ASP 解法のみでの実行に加え，
LNPS と 各種 destroy 演算を加えたもので行い，
destroy 演算は，
random $N$ ($N$ = 0, 3, 5)，
day-period，
day-room，
swap-room $N$ ($N$ = 5, 10)を選択した．
表 2 は，
それぞれの手法で得られた最適値・最良値を示している．
左の列から順に，
問題名，既存 ASP 解法によって得られた値，各種提案手法によって得られた値
となっている．
各問題ごとに実験した手法の中で最も良い値が得られたものは太字で示してある．
それぞれの手法で良い値が得られた問題数を比較すると，
順に swap-room 5，swap-room 10 が良い性能を示している．
表 3 では別のアプローチとの比較を行っている．
既知の最良値は先行研究によって得られた解の上界を表しており，
提案ベストの値は，
各種提案手法の中で最も良かった値としている．
それぞれ最良値との比では，
既知の最良値を 100\% として，
得られた解での増減を表している．
既存 ASP 解法では +437\% と 5 倍以上となっているが，
提案手法では +26\%にまで抑えられている．
また comp09 については -3\% と既知の最良値を更新できた．

\begin{table*}[tbp]
  \label{table:bench:result1}
  \begin{center}
  \caption{得られた最適値・最良値}
\begin{tableA}
    \input{tables/m1_mid_value}
  \end{tableA}
  \end{center}
\end{table*}

\begin{table*}[tbp]
  \label{table:bench:result2}
  \centering
   \caption{既知の最良値との比較}
  \begin{tableB}
    \input{tables/m1_mid_comparison}
  \end{tableB}
\end{table*}